<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kopo.hanaglobal.hana_global.web.repository.ExchangeRepository">
<!-- 날짜/통화로 환율 조회  -->
    <select id="getExchangeRateHist" resultType="com.kopo.hanaglobal.hana_global.web.dto.response.ExchangeRateHistDTO"
            parameterType="com.kopo.hanaglobal.hana_global.web.dto.request.ExchangeRateHistRequestDTO">
        SELECT currency_code, rate_date, buy_rate, sell_rate, remittance, receiving,
               base_rate, prev_rate, usd_conversion_rate
        FROM exchange_rate_hist
        WHERE TO_CHAR(rate_date, 'YYYY/MM/DD') = #{inqDt} AND currency_code = #{currency}
    </select>

    <select id="getExchangeRateForLastSixMonths" resultType="com.kopo.hanaglobal.hana_global.web.dto.response.ExchangeRateHistDTO"
            parameterType="com.kopo.hanaglobal.hana_global.web.dto.request.CurrencyRequestDTO">
        SELECT currency_code, rate_date, buy_rate, sell_rate, remittance, receiving,
               base_rate, prev_rate, usd_conversion_rate
        FROM exchange_rate_hist
        WHERE rate_date BETWEEN TO_DATE(#{startDate}, 'YYYY/MM/DD') AND TO_DATE(#{endDate}, 'YYYY/MM/DD')
          AND currency_code = #{currency}
        ORDER BY rate_date ASC
    </select>

</mapper>
